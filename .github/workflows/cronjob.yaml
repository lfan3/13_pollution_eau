name: Trigger Action to run check update data python script
# Objectif:check the last updated data from https://www.data.gouv.fr/fr/datasets/resultats-du-controle-sanitaire-de-leau-distribuee-commune-par-commune/#/resources
# we check if the year existed in the config, 
# if it existed, we just call the update script
# if not, we need to check the last last config info of 2025
on:
  schedule:
    - cron: 50 23 4,28 * *  

jobs:
  run-python-check-update:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Install a specific version of uv
        uses: astral-sh/setup-uv@v5
        with:
          version: ">=0.4.0"

      - name: Install dependencies
        run: uv sync 

      - name: run python check update
        run: uv run pipelines/tasks/check_data_update

